<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Extended Affinity Propagation | Shape Space Explorer</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Extended Affinity Propagation" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<link rel="canonical" href="http://localhost:4000/extended_affinity_propagation/" />
<meta property="og:url" content="http://localhost:4000/extended_affinity_propagation/" />
<meta property="og:site_name" content="Shape Space Explorer" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Extended Affinity Propagation" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","headline":"Extended Affinity Propagation","url":"http://localhost:4000/extended_affinity_propagation/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Shape Space Explorer" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Shape Space Explorer</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/cell_segmentation/">Cell Segmentation</a><a class="page-link" href="/display_shape_features/">Display Shape Features</a><a class="page-link" href="/extended_affinity_propagation/">Extended Affinity Propagation</a><a class="page-link" href="/getting_started/">Getting Started</a><a class="page-link" href="/group_analysis/">Group Analysis</a><a class="page-link" href="/inspect_shape_space/">Inspect Shape Space</a><a class="page-link" href="/out_of_sample_extension/">Out of Sample Extension</a><a class="page-link" href="/shape_manifold_embedding/">Shape Manifold Embedding</a><a class="page-link" href="/shape_space_dynamic/">Shape Space Dynamic</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <h1 id="extended-affinity-propagation">Extended Affinity Propagation</h1>

<p>This step is optional.</p>

<p>This step determines similarities between shapes. 
In this step, similarities between shapes are determined. For pre-processing run 
5-Extended_Affinity_Propagation &gt; Run_Affinity_Propagation.m</p>

<p>Note: this step needs first to load CellShapeData.mat; when this file is large, say about 20 GB, loading the file may take half an hour where the computer gives no feedback. Once loaded, the program prints progress on the console. <br />
<img align="center" width="500px" src="./img/progress.png" /></p>

<p>After successful completion, the following nine files should have been generated in the Analysis folder:</p>
<ul>
  <li>avail_list.mat</li>
  <li>APclusterOutput.mat</li>
  <li>double_sim_matrix.mat</li>
  <li>linkagemat.mat</li>
  <li>pref.mat</li>
  <li>resp_mat.mat</li>
  <li>single_sim_matrix.mat</li>
  <li>unconv.mat</li>
  <li>wish_list.mat</li>
</ul>

<h2 id="inspecting-automatic-classification-of-shapes">Inspecting Automatic Classification of Shapes</h2>

<p>To inspect the automatic classification, run 5-Extended_Affinity_Propagation &gt; Inspect_ShapeAffinity.m , select the Analysis folder, and then the program produces two figures (see below) <br />
<img align="center" width="10px" src="./img/column_shapes.png" />
<img align="center" width="500px" src="./img/matrix_shapes.png" /></p>

<p>The left figure shows the unordered exemplars with one example highlighted for each of 10 clusters, while the right figure shows ten example shapes from each cluster.</p>

<h2 id="dendrogram-of-shapes">Dendrogram of Shapes</h2>

<p>Often, the program produces to many clusters and it is desirable to constraint the number of clusters. To make an informed choice, the cluster dendrogram should be consulted. 
Run 5-Extended_Affinity_Propagation &gt; Run_Dendogram_of_Shapes.m, select Analysis folder, and then the program produces the cluster dendrogram (see below). Use this to decide how many clusters are appropriate for the dataset. <br />
<img align="center" width="500px" src="./img/dendrogram.png" /></p>

<h2 id="constrained-clustering">Constrained Clustering</h2>

<p>Then run
5-Extended_Affinity_Propagation &gt; Run_constrained_Clustering.m, 
select the Analysis folder and configure the number of clusters based on your choice made above (see figure below). <br />
<img align="center" width="500px" src="./img/contrained_clustering_interface.png" /></p>

<p>Note: The number you enter for constraint clusters must be smaller than the number of exemplars from the affinity propagation; otherwise the program terminates without results. <br />
<img align="center" width="300px" src="./img/cluster_colours.png" />
<img align="center" width="300px" src="./img/coloured_exemplars.png" /></p>

<p>Left figure shows all shapes in shape space coloured in the cluster colours. Each dot in the figure corresponds to a cell shape. The x and y axes are the first two Diffusion Coordinates. The right figure the ordered list of exemplars coloured in the cluster colours.</p>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Shape Space Explorer</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Shape Space Explorer</li><li><a class="u-email" href="mailto:camdu@warwick.ac.uk">camdu@warwick.ac.uk</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/warwickcamdu"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">warwickcamdu</span></a></li><li><a href="https://www.twitter.com/warwickcamdu"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">warwickcamdu</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
